lib tm
    : # sources
    [ glob src/tm/*.c ]
    #/tm/plat//headers XXX fixme
    #/tm/decl//headers XXX fixme
    : # requirements
    <include>src
    : # default-build
    <link>static
    : # usage-requirements
    <include>src
;

stage stage/
    : # sources
    tm
    : # requirements
    : # default-build
    <link>static
    : # usage-requirements
;

PREFIX ?= /usr ;
DESTROOT ?= / ;

path-constant prefix : $(PREFIX) ;
path-constant destroot : $(DESTROOT) ;

install install-lib
    : # sources
    tm
    : # requirements
    <location>$(destroot)$(prefix)/lib/
    <address-model>64:<location>$(destroot)$(prefix)/lib64/
    : # default-build
;

install install-pkgconfig : .//tm.pc : <location>$(destroot)$(prefix)/lib/pkgconfig ;
alias install : install-lib install-pkgconfig ;
explicit install install-lib install-pkgconfig ;
